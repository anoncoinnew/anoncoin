
<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>anonCoin - –î–µ—Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–π –±–ª–æ–∫—á–µ–π–Ω</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 0; padding: 20px; background: #1a1a1a; color: white; }
        .container { max-width: 1200px; margin: 0 auto; }
        .header { text-align: center; margin-bottom: 30px; }
        .stats { display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 20px; margin-bottom: 30px; }
        .stat-card { background: #2d2d2d; padding: 20px; border-radius: 8px; text-align: center; }
        .actions { display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 20px; }
        .action-card { background: #2d2d2d; padding: 20px; border-radius: 8px; }
        button { background: #4CAF50; color: white; border: none; padding: 10px 20px; border-radius: 4px; cursor: pointer; }
        button:hover { background: #45a049; }
        input, select { width: 100%; padding: 8px; margin: 5px 0; border: 1px solid #555; border-radius: 4px; background: #333; color: white; }
        .gold { color: #ffd700; }
        .success { color: #4CAF50; }
        .error { color: #f44336; }
        .anon-button { background: #9C27B0; }
        .anon-button:hover { background: #7B1FA2; }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1 class="gold">ü™ô anonCoin - –î–µ—Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–π –±–ª–æ–∫—á–µ–π–Ω</h1>
            <p>–ü–æ–ª–Ω–∞—è –∞–Ω–æ–Ω–∏–º–Ω–æ—Å—Ç—å ‚Ä¢ P2P —Å–µ—Ç—å ‚Ä¢ –ö–æ–ª—å—Ü–µ–≤—ã–µ –ø–æ–¥–ø–∏—Å–∏</p>
        </div>
        
        <div class="stats" id="stats">
            <!-- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ -->
        </div>
        
        <div class="actions">
            <div class="action-card">
                <h3>üëõ –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–æ—à–µ–ª—å–∫–æ–º</h3>
                <button onclick="createWallet()">–°–æ–∑–¥–∞—Ç—å –∫–æ—à–µ–ª–µ–∫</button>
                <div id="wallet-info"></div>
            </div>
            
            <div class="action-card">
                <h3>üí∞ –û—Ç–ø—Ä–∞–≤–∏—Ç—å —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—é</h3>
                <input type="text" id="receiver" placeholder="–ê–¥—Ä–µ—Å –ø–æ–ª—É—á–∞—Ç–µ–ª—è">
                <input type="number" id="amount" placeholder="–°—É–º–º–∞" step="0.01">
                <button onclick="sendTransaction(false)">–û–±—ã—á–Ω–∞—è —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è</button>
                <button onclick="sendTransaction(true)" class="anon-button">–ê–Ω–æ–Ω–∏–º–Ω–∞—è —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è</button>
                <div id="transaction-result"></div>
            </div>
            
            <div class="action-card">
                <h3>‚õèÔ∏è –ú–∞–π–Ω–∏–Ω–≥</h3>
                <button onclick="startMining()">–ú–∞–π–Ω–∏—Ç—å –±–ª–æ–∫</button>
                <div id="mining-result"></div>
            </div>
        </div>
    </div>

    <script>
        let currentWallet = null;
        
        // –ó–∞–≥—Ä—É–∑–∫–∞ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏
        function loadStats() {
            fetch('/api/blockchain/info')
                .then(response => response.json())
                .then(data => {
                    document.getElementById('stats').innerHTML = `
                        <div class="stat-card">
                            <h3 class="gold">${data.blocks_count}</h3>
                            <p>–ë–ª–æ–∫–æ–≤ –≤ —Ü–µ–ø–∏</p>
                        </div>
                        <div class="stat-card">
                            <h3 class="success">${data.total_supply.toFixed(2)}</h3>
                            <p>–û–±—â–µ–µ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ</p>
                        </div>
                        <div class="stat-card">
                            <h3>${data.pending_transactions}</h3>
                            <p>–û–∂–∏–¥–∞—é—â–∏—Ö —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π</p>
                        </div>
                        <div class="stat-card">
                            <h3>${data.is_valid ? '‚úÖ' : '‚ùå'}</h3>
                            <p>–í–∞–ª–∏–¥–Ω–æ—Å—Ç—å –±–ª–æ–∫—á–µ–π–Ω–∞</p>
                        </div>
                    `;
                });
        }
        
        // –°–æ–∑–¥–∞–Ω–∏–µ –∫–æ—à–µ–ª—å–∫–∞
        function createWallet() {
            fetch('/api/wallet/create', {
                method: 'POST',
                headers: {'Content-Type': 'application/json'},
                body: JSON.stringify({})
            })
            .then(response => response.json())
            .then(data => {
                currentWallet = data;
                document.getElementById('wallet-info').innerHTML = `
                    <div class="success">
                        <p><strong>–ö–æ—à–µ–ª–µ–∫ —Å–æ–∑–¥–∞–Ω!</strong></p>
                        <p>–ê–¥—Ä–µ—Å: ${data.address.substring(0, 16)}...</p>
                        <p>–ë–∞–ª–∞–Ω—Å: ${data.balance} anonCoin</p>
                    </div>
                `;
            });
        }
        
        // –û—Ç–ø—Ä–∞–≤–∫–∞ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏
        function sendTransaction(anonymous) {
            if (!currentWallet) {
                alert('–°–Ω–∞—á–∞–ª–∞ —Å–æ–∑–¥–∞–π—Ç–µ –∫–æ—à–µ–ª–µ–∫!');
                return;
            }
            
            const receiver = document.getElementById('receiver').value;
            const amount = document.getElementById('amount').value;
            
            if (!receiver || !amount) {
                alert('–ó–∞–ø–æ–ª–Ω–∏—Ç–µ –≤—Å–µ –ø–æ–ª—è!');
                return;
            }
            
            fetch('/api/transaction/send', {
                method: 'POST',
                headers: {'Content-Type': 'application/json'},
                body: JSON.stringify({
                    receiver: receiver,
                    amount: parseFloat(amount),
                    anonymous: anonymous
                })
            })
            .then(response => response.json())
            .then(data => {
                if (data.success) {
                    document.getElementById('transaction-result').innerHTML = 
                        `<div class="success">–¢—Ä–∞–Ω–∑–∞–∫—Ü–∏—è –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∞! –¢–∏–ø: ${anonymous ? '–ê–Ω–æ–Ω–∏–º–Ω–∞—è' : '–û–±—ã—á–Ω–∞—è'}</div>`;
                    document.getElementById('receiver').value = '';
                    document.getElementById('amount').value = '';
                } else {
                    document.getElementById('transaction-result').innerHTML = 
                        `<div class="error">–û—à–∏–±–∫–∞: ${data.error}</div>`;
                }
            });
        }
        
        // –ú–∞–π–Ω–∏–Ω–≥ –±–ª–æ–∫–∞
        function startMining() {
            if (!currentWallet) {
                alert('–°–Ω–∞—á–∞–ª–∞ —Å–æ–∑–¥–∞–π—Ç–µ –∫–æ—à–µ–ª–µ–∫!');
                return;
            }
            
            document.getElementById('mining-result').innerHTML = '<div>–ú–∞–π–Ω–∏–Ω–≥ –Ω–∞—á–∞—Ç...</div>';
            
            fetch('/api/mining/start', {
                method: 'POST',
                headers: {'Content-Type': 'application/json'},
                body: JSON.stringify({})
            })
            .then(response => response.json())
            .then(data => {
                if (data.success) {
                    document.getElementById('mining-result').innerHTML = 
                        '<div class="success">–ë–ª–æ–∫ –∑–∞–º–∞–π–Ω–µ–Ω!</div>';
                    setTimeout(loadStats, 1000); // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏
                } else {
                    document.getElementById('mining-result').innerHTML = 
                        `<div class="error">–û—à–∏–±–∫–∞: ${data.error}</div>`;
                }
            });
        }
        
        // –ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ
        loadStats();
        setInterval(loadStats, 5000); // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–∞–∂–¥—ã–µ 5 —Å–µ–∫—É–Ω–¥
    </script>
</body>
</html>
    